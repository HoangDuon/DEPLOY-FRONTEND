<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard - LMS</title>
    <link rel="stylesheet" href="/app/static/css/dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- CSS T√ôY CH·ªàNH CHO SELECT V√Ä INPUT -->
    <style>
        /* ƒê·ªãnh h√¨nh chung cho t·∫•t c·∫£ c√°c select v√† input.form-control trong ph·∫ßn submit-feedback */
        #submit-feedback .form-control, 
        #submit-feedback select,
        #submit-feedback input[type="text"],
        #submit-feedback input[type="email"] {
            /* ƒê·ªãnh h√¨nh container */
            padding: 8px 12px;
            height: 40px; 
            border: 1px solid #d1d5db; /* gray-300 */
            border-radius: 6px; 
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm nh·∫π */
            width: 100%; /* ƒê·∫£m b·∫£o chi·∫øm to√†n b·ªô chi·ªÅu r·ªông group */
            
            /* Typography */
            background-color: #ffffff;
            color: #1f2937; /* gray-800 */
            font-size: 14px;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }

        /* ƒê·ªãnh h√¨nh cho textarea */
        #submit-feedback textarea.form-control {
            height: auto;
            min-height: 100px; 
        }

        /* Hi·ªáu ·ª©ng Focus */
        #submit-feedback .form-control:focus, 
        #submit-feedback select:focus,
        #submit-feedback input:focus,
        #submit-feedback textarea:focus {
            border-color: #4A6CF7; /* Blue ch·ªß ƒë·∫°o */
            box-shadow: 0 0 0 2px rgba(74, 108, 247, 0.3);
            outline: none;
        }

        /* T·∫°o style ƒë·∫πp cho select (lo·∫°i b·ªè m≈©i t√™n m·∫∑c ƒë·ªãnh) */
        #submit-feedback select {
            appearance: none;
            -webkit-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none'%3E%3Cpath d='M7 10l5 5 5-5H7z' fill='%236B7280'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 14px;
            padding-right: 30px; 
            cursor: pointer;
        }
        
        /* CƒÉn ch·ªânh c√°c b·ªô l·ªçc trong history */
        #submit-feedback .form-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div id="sidebar-placeholder"></div>
        <main class="main-content">
            <div id="header-placeholder"></div>

            <div class="content-area">
                <section id="dashboard" class="content-section active">
                    <h2>T·ªïng quan H·ªçc vi√™n</h2>
                    <div class="card-container" style="margin-bottom: 30px;">
                        <div class="card"><i class="fas fa-book-open"></i><h3 id="total-classes">0</h3><p>T·ªïng s·ªë L·ªõp ƒëang h·ªçc</p></div>
                        <div class="card"><i class="fas fa-medal"></i><h3 id="avg-gpa">0.0</h3><p>ƒêi·ªÉm trung b√¨nh (GPA)</p></div>
                        <div class="card"><i class="fas fa-calendar-check"></i><h3 id="absent-count">0</h3><p>S·ªë bu·ªïi v·∫Øng (Th√°ng)</p></div>
                    </div>
                    
                    <div class="dashboard-tabs">
                        <button class="tab-item dashboard-tab active" data-tab="schedule-view"><i class="fas fa-calendar-alt"></i> Th·ªùi kho√° bi·ªÉu</button>
                        <button class="tab-item dashboard-tab" data-tab="announcements-view"><i class="fas fa-bullhorn"></i> Th√¥ng b√°o</button>
                    </div>
                
                    <div id="schedule-view" class="tab-content active">
                        <div class="schedule-title-bar" style="margin-top: 20px;">
                            <h2>Th·ªùi kho√° bi·ªÉu trong tu·∫ßn</h2>
                            <div class="schedule-controls">
                                <button id="prev-week" class="btn btn-secondary"><i class="fas fa-chevron-left"></i></button>
                                <span id="week-display" class="current-week-text"></span>
                                <button id="next-week" class="btn btn-secondary"><i class="fas fa-chevron-right"></i></button>
                            </div>
                        </div>
                        <div class="weekly-schedule">
<div class="schedule-header">
    <div class="time-column-header"></div>
    <div data-day-header="monday">
        <div class="day-name">Th·ª© Hai</div>
        <div class="day-date" data-day-date="monday"></div>
    </div>
    <div data-day-header="tuesday">
        <div class="day-name">Th·ª© Ba</div>
        <div class="day-date" data-day-date="tuesday"></div>
    </div>
    <div data-day-header="wednesday">
        <div class="day-name">Th·ª© T∆∞</div>
        <div class="day-date" data-day-date="wednesday"></div>
    </div>
    <div data-day-header="thursday">
        <div class="day-name">Th·ª© NƒÉm</div>
        <div class="day-date" data-day-date="thursday"></div>
    </div>
    <div data-day-header="friday">
        <div class="day-name">Th·ª© S√°u</div>
        <div class="day-date" data-day-date="friday"></div>
    </div>
    <div data-day-header="saturday">
        <div class="day-name">Th·ª© B·∫£y</div>
        <div class="day-date" data-day-date="saturday"></div>
    </div>
    <div data-day-header="sunday">
        <div class="day-name">Ch·ªß Nh·∫≠t</div>
        <div class="day-date" data-day-date="sunday"></div>
    </div>
</div>

                           <div class="schedule-body" id="student-schedule-body">
                               <div class="time-column">
                                   <span>07:00</span><span>08:00</span><span>09:00</span>
                                   <span>10:00</span><span>11:00</span><span>12:00</span>
                                   <span>13:00</span><span>14:00</span><span>15:00</span>
                                   <span>16:00</span><span>17:00</span><span>18:00</span>
                                   <span>19:00</span><span>20:00</span><span>21:00</span>
                                   <span>22:00</span>
                               </div>
                               <div class="day-column" data-day="monday"></div>
                               <div class="day-column" data-day="tuesday"></div>
                               <div class="day-column" data-day="wednesday"></div>
                               <div class="day-column" data-day="thursday"></div>
                               <div class="day-column" data-day="friday"></div>
                               <div class="day-column" data-day="saturday"></div>
                               <div class="day-column" data-day="sunday"></div>
                           </div>
                        </div>
                    </div>
                    
                    <div id="announcements-view" class="tab-content hidden">
                        <h3  style="margin-bottom: 12px;">Th√¥ng b√°o m·ªõi nh·∫•t</h3>
                        <div id="announcements-list">
                            </div>
                    </div>
                </section>
                
                <section id="my-classes" class="content-section">
                    <div id="class-list-view">
                        <h2>C√°c L·ªõp ƒëang theo h·ªçc</h2>
                        <div class="card-container" id="student-class-cards">
                            </div>
                    </div>

<div id="class-detail-view" style="display: none;">
    <button id="back-to-class-list" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Quay l·∫°i danh s√°ch</button>
    <h2 style="margin-top: 20px;">Chi ti·∫øt l·ªõp h·ªçc: <span id="student-class-detail-title"></span></h2>
    
    <div class="tabs">
        <button class="tab-item active" data-tab="my-grades"><i class="fas fa-award"></i> ƒêi·ªÉm s·ªë</button>
        <button class="tab-item" data-tab="my-attendance"><i class="fas fa-check-circle"></i> ƒêi·ªÉm danh</button>
        <button class="tab-item" data-tab="my-assignments"><i class="fas fa-tasks"></i> B√†i t·∫≠p</button> 
    </div>
    
    <div class="tab-content-container">
        <div id="my-grades" class="tab-content active">
            <h3>B·∫£ng ƒëi·ªÉm c√° nh√¢n</h3>
            <div class="table-container">
                <table id="my-grades-table">
                    <thead><tr><th>B√†i t·∫≠p</th><th>ƒêi·ªÉm s·ªë</th><th>T·ª∑ tr·ªçng</th></tr></thead>
                    <tbody id="my-grades-table-body"></tbody>
                    <tfoot><tr><th>ƒêi·ªÉm trung b√¨nh (D·ª± ki·∫øn)</th><th colspan="2" id="final-gpa"></th></tr></tfoot>
                </table>
            </div>
        </div>
        <div id="my-attendance" class="tab-content hidden">
            <h3>L·ªãch s·ª≠ ƒëi·ªÉm danh</h3>
            <div class="table-container">
                <table id="my-attendance-table">
                    <thead><tr><th>Bu·ªïi h·ªçc</th><th>Ng√†y h·ªçc</th><th>Tr·∫°ng th√°i</th></tr></thead>
                    <tbody id="my-attendance-table-body"></tbody>
                </table>
            </div>
        </div>
        
        <div id="my-assignments" class="tab-content hidden"> 
            <h3>B√†i t·∫≠p & D·ª± √°n</h3>
            <div id="assignment-list-container">
                </div>
        </div>
        
    </div>
</div>
                </section>

                <section id="submit-feedback" class="content-section">
                    <h2>G·ª≠i Ph·∫£n h·ªìi & G√≥p √Ω</h2>

                    <div class="form-box card" style="margin-bottom: 30px;">
                        <h3><i class="fa-solid fa-paper-plane"></i> G·ª≠i G√≥p √Ω/ƒê√°nh gi√° m·ªõi</h3>
                        <form id="student-feedback-form">
                            
                            <!-- üö® ƒê√£ lo·∫°i b·ªè ph·∫ßn ch·ªçn l·ªõp v√† m·ª©c ƒë·ªô h√†i l√≤ng -->
                            <div class="form-group">
                                <label for="feedback-title-input">Ti√™u ƒë·ªÅ G√≥p √Ω:</label>
                                <input type="text" id="feedback-title-input" name="title" class="form-control" placeholder="T√≥m t·∫Øt g√≥p √Ω c·ªßa b·∫°n" required>
                            </div>

                            <div class="form-group">
                                <label for="feedback-detail-content">N·ªôi dung chi ti·∫øt (G√≥p √Ω/L√Ω do):</label>
                                <textarea id="feedback-detail-content" name="content" rows="4" class="form-control" placeholder="Vui l√≤ng nh·∫≠p chi ti·∫øt ph·∫£n h·ªìi c·ªßa b·∫°n..." required style="resize: none;"></textarea>
                            </div>

                            <button id="submit-student-feedback-btn" type="submit" class="btn btn-primary" style="margin-top: 15px;">
                                G·ª≠i ph·∫£n h·ªìi
                            </button>
                        </form>
                    </div>

                    <div class="card" style="margin-bottom: 20px; padding: 20px;">
                        <h3>L·ªãch s·ª≠ Ph·∫£n h·ªìi ƒë√£ g·ª≠i</h3>
                        <div class="form-grid" id="feedback-history-filters">
                            <div class="form-group">
                                <label for="history-search">T√¨m ki·∫øm (Ti√™u ƒë·ªÅ/Tr·∫°ng th√°i):</label>
                                <input type="text" id="history-search" class="form-control" placeholder="T√¨m ki·∫øm theo ti√™u ƒë·ªÅ...">
                            </div>

                            <div class="form-group">
                                <label for="history-filter-status">L·ªçc theo Tr·∫°ng th√°i:</label>
                                <select id="history-filter-status" class="form-control">
                                    <option value="all">-- T·∫•t c·∫£ Tr·∫°ng th√°i --</option>
                                    <option value="pending">Ch·ªù x·ª≠ l√Ω</option>
                                    <option value="resolved">ƒê√£ x·ª≠ l√Ω</option>
                                    </select>
                            </div>

                            <div class="form-group">
                                <label for="history-sort-date">S·∫Øp x·∫øp theo Ng√†y:</label>
                                <select id="history-sort-date" class="form-control">
                                    <option value="newest">M·ªõi nh·∫•t</option>
                                    <option value="oldest">C≈© nh·∫•t</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="table-container">
                        <table id="feedback-history-table">
                            <thead>
                                <tr>
                                    <th>Ti√™u ƒë·ªÅ</th>
                                    <th>N·ªôi dung (T√≥m t·∫Øt)</th>
                                    <th>Ng√†y g·ª≠i</th>
                                    <th>Tr·∫°ng th√°i</th>
                                </tr>
                            </thead>
                            <tbody id="feedback-history-table-body">
                                </tbody>
                        </table>
                    </div>
                </section>
            </div>
        </main>
    </div>

<!-- MODAL N·ªòP B√ÄI T·∫¨P -->
<div id="submission-modal-overlay" class="modal-overlay hidden">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header">
                <h3 id="submission-modal-title">N·ªôp b√†i t·∫≠p: <span id="submission-assignment-title"></span></h3>
                <span id="close-submission-modal-btn" class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <p>H·∫°n ch√≥t: <span id="submission-due-date" style="font-weight: bold;">N/A</span></p>
                <div id="current-submission-info" style="margin-bottom: 15px; padding: 10px; border: 1px dashed #ccc; border-radius: 5px;">
                    <!-- Th√¥ng tin n·ªôp b√†i hi·ªán t·∫°i -->
                </div>

                <form id="assignment-submission-form">
                    <input type="hidden" id="submission-assignment-id" name="assignment_id">

                    <div class="form-group">
                        <label for="submission-file">Ch·ªçn File N·ªôp B√†i (B·∫Øt bu·ªôc):</label>
                        <input type="file" id="submission-file" name="file" class="form-control" required>
                    </div>

                    <!-- <div class="form-group">
                        <label for="submission-note">Ghi ch√∫ (T√πy ch·ªçn):</label>
                        <textarea id="submission-note" name="note" rows="2" class="form-control" placeholder="Ghi ch√∫ v·ªÅ b√†i n·ªôp..."></textarea>
                    </div> -->

                    <div class="modal-footer" style="padding: 0; margin-top: 20px;">
                        <button id="cancel-submission-btn" type="button" class="btn btn-secondary">H·ªßy</button>
                        <button id="submit-assignment-btn" type="submit" class="btn btn-primary">N·ªôp b√†i</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div id="profile-modal-overlay" class="modal-overlay hidden">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header">
                <h3 id="profile-modal-title">Th√¥ng tin T√†i kho·∫£n</h3>
                <span id="close-profile-modal-btn" class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                
                <div id="profile-info-display">
                    <p><strong>T√™n ƒëƒÉng nh·∫≠p:</strong> <span id="profile-username"></span></p>
                    <p><strong>Email:</strong> <span id="profile-email"></span></p>
                </div>
                
                <div id="profile-edit-form" class="hidden">
                    <div class="form-group">
                        <label for="edit-username">T√™n ƒëƒÉng nh·∫≠p m·ªõi:</label>
                        <input type="text" id="edit-username" class="form-control" disabled> 
                    </div>
                    <div class="form-group">
                        <label for="edit-email">Email:</label>
                        <input type="email" id="edit-email" class="form-control" disabled readonly>
                    </div>
                    
                    <hr style="margin: 20px 0;">
                    
                    <div class="form-group">
                        <label for="new-password">M·∫≠t kh·∫©u m·ªõi:</label>
                        <input type="password" id="new-password" class="form-control" placeholder="ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng mu·ªën ƒë·ªïi m·∫≠t kh·∫©u">
                    </div>
                    <div class="form-group">
                        <label for="current-password">M·∫≠t kh·∫©u hi·ªán t·∫°i (B·∫ÆT BU·ªòC ƒë·ªÉ l∆∞u thay ƒë·ªïi):</label>
                        <input type="password" id="current-password" class="form-control" placeholder="Nh·∫≠p m·∫≠t kh·∫©u hi·ªán t·∫°i" required>
                    </div>
                    <p class="text-danger hidden" id="password-error" style="color: red; font-size: 0.9em;">M·∫≠t kh·∫©u kh√¥ng ƒë√∫ng.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancel-profile-btn" class="btn btn-secondary">ƒê√≥ng</button>
                <!-- <button id="toggle-edit-profile-btn" class="btn btn-warning">Thay ƒë·ªïi th√¥ng tin</button>
                <button id="save-profile-btn" class="btn btn-primary hidden">L∆∞u thay ƒë·ªïi</button> -->
            </div>
        </div>
    </div>

    <script src="/app/static/js/common.js"></script>
    <script src="/app/static/js/student.js"></script>
</body>
</html>
